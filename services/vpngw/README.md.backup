# Nebius VPN Gateway (VM-based)

A modular Python-based orchestrator and agent to provision Nebius Compute VMs as Site-to-Site IPsec VPN gateways compatible with GCP HA VPN, AWS Site-to-Site VPN, Azure VPN Gateway, and on-prem routers.

## Features

- IPsec (strongSwan) with IKEv2/IKEv1, AES-256, SHA-256/384/512, DH 14/20/24
- BGP (FRR) and static routing modes
- Single-VM and multi-VM gateway groups
- YAML-driven configuration plus optional peer config import
- Idempotent agent applying configs on the VM

## Project Layout

- `nebius-vpngw-config.yaml`: main user-facing config
- `src/nebius_vpngw/cli.py`: orchestrator CLI (`nebius-vpngw`)
- `src/nebius_vpngw/config_loader.py`: YAML and peer-merge logic
- `src/nebius_vpngw/peer_parsers/`: vendor parsers (GCP/AWS/Azure/Cisco)
- `src/nebius_vpngw/deploy/`: VM, route, and SSH push managers
- `src/nebius_vpngw/agent/`: always-running agent on each VM

## Quick Start

Prereqs (macOS):

- Python 3.10–3.12
- `graphviz` (for diagrams; optional)
- Poetry (maintainers only)

Install and run CLI (pip, recommended for users):

```zsh
python3 -m venv .venv
source .venv/bin/activate
pip install -U pip wheel
pip install -e .
python -c "import nebius.sdk as sdk; print('Nebius SDK OK:', sdk)"
nebius-vpngw --help
```

Install and run CLI (Poetry, for maintainers):

```zsh
poetry install
poetry run python -c "import nebius.sdk as sdk; print('Nebius SDK OK:', sdk)"
poetry run nebius-vpngw --help
# or run as module under Poetry
poetry run python -m nebius_vpngw --help
```

### Run

Dry-run (renders actions without applying):

```zsh
nebius-vpngw --local-config-file ./nebius-vpngw-config.yaml --dry-run
```

Apply (provisions gateway VMs and pushes config):

```zsh
# Ensure auth context (examples)
export TENANT_ID="your-tenant-id"
export PROJECT_ID="your-project-id"
export REGION_ID="eu-north1"

nebius-vpngw \
  --local-config-file ./nebius-vpngw-config.yaml \
  --sa nb-vpngw-sa \
  --project-id "$PROJECT_ID" \
  --zone "${REGION_ID}-a"
```

Networking defaults (v1):

- Single VPC network selected via `network_id` (optional). If omitted, the orchestrator resolves your environment’s default network.
- One gateway subnet named `vpngw-subnet` with CIDR `/27` is ensured/created under the selected network.
- Each gateway VM is provisioned with two NICs (eth0, eth1) attached to `vpngw-subnet`.
- Each NIC gets one public IP allocation. If `external_ips` are not provided in YAML, the orchestrator creates two allocations and attaches them.

### First run bootstrap

- If you run `nebius-vpngw` without `--local-config-file`, the CLI checks for `./nebius-vpngw-config.yaml`.
- If missing, it auto-creates one by copying the packaged `nebius-vpngw-config-template.yaml` into the current directory and exits.
- Edit the file to fill environment-specific values and secrets, then re-run.

Secrets guidance:

- Do not commit `nebius-vpngw-config.yaml`. Prefer environment variables for placeholders (e.g., `${GCP_TUNNEL_1_PSK}`) or a secret manager.
- Only the template file is distributed with the wheel.

SSH public key convenience:

- You can either embed `gateway_group.vm_spec.ssh_public_key` (inline) or set `gateway_group.vm_spec.ssh_public_key_path: "~/.ssh/id_ed25519.pub"`.
- If `ssh_public_key_path` is provided and `ssh_public_key` is empty/missing, the CLI reads the file and inlines its contents automatically.
- Optional: set `gateway_group.vm_spec.ssh_username` (default: `ubuntu`) and `gateway_group.vm_spec.ssh_private_key_path` (default: use your SSH agent) for pushing configs over SSH.

Networking-specific YAML fields:

- `gateway_group.network_id` (optional): target VPC network. If missing, defaults to the environment’s default network.
- `gateway_group.external_ips` (optional): list of public IP allocation IDs; when absent or empty, two allocations are created and attached to eth0/eth1.

### Nebius API authentication (service account)

- Create a Service Account with appropriate permissions on your `project_id` and obtain an access token (see SA setup script linked in examples).
- Configure these context variables via environment or YAML placeholders:
  - `TENANT_ID` → `${TENANT_ID}`
  - `PROJECT_ID` → `${PROJECT_ID}`
  - `REGION_ID` → `${REGION_ID}`
- Recommended: export as env vars, reference them in YAML as `${...}`.

Token requirement (PyPI SDK):

- The PyPI Nebius SDK reads an IAM token from `NEBIUS_IAM_TOKEN` by default.
- When you pass `--sa`, the CLI will attempt to create/reuse a Service Account and export `NEBIUS_IAM_TOKEN` in the environment for this run.
- Alternatively, you can set it manually:

```zsh
export NEBIUS_IAM_TOKEN="$(your_token_command_or_value)"
```

Minimal config (YAML) for quick start:

```yaml
# nebius-vpngw-config.yaml (minimal)
gateway_group:
  name: vpngw
  vm_spec:
    count: 1
    ssh_public_key_path: "~/.ssh/id_ed25519.pub"
  # optional: if omitted, default network is used
  # network_id: ${NETWORK_ID}
  # optional: create two allocations if omitted/empty
  # external_ips: []
```

Minimal Python example with `nebius.sdk`:

```python
import os
import nebius.sdk as sdk

tenant_id = os.environ["TENANT_ID"]
project_id = os.environ["PROJECT_ID"]
region_id = os.environ.get("REGION_ID", "eu-north1")

client = sdk.SDK(tenant_id=tenant_id, project_id=project_id, region_id=region_id)

# Example: list VPC networks (API surface may vary by SDK version)
vpc = client.vpc()
for net in vpc.network.list(parent_id=project_id):
  print(net)
```

Note: ensure your SA token is available to the SDK per pysdk instructions (e.g., env or config file). Refer to the official API reference.

Reproducibility tip:

```zsh
poetry lock
git add poetry.lock && git commit -m "Lock dependencies"
```

## Install

This project uses Poetry.

```zsh
# pyproject.toml is at repository root
poetry install
# Activate the virtualenv (Poetry >=2.x removed the default shell command):
eval "$(poetry env activate zsh)"
# Now run the CLI
nebius-vpngw --help

# Optional: restore legacy 'poetry shell' behavior by installing the plugin
# poetry self add poetry-plugin-shell
# poetry shell
```

Alternatively with `pip` (editable mode):

```zsh
python3 -m venv .venv
source .venv/bin/activate
pip install -e .
python -c "import nebius.sdk as sdk; print('Nebius SDK OK:', sdk)"
```

Troubleshooting:

- If you see `ModuleNotFoundError: No module named 'nebius.pysdk'`, your environment still references the GitHub SDK layout. This package targets the PyPI Nebius SDK (`nebius.sdk`). Ensure the virtualenv is active and reinstall via pip as shown above.

## CLI Usage

```zsh
# Default invocation (apply is implicit)
nebius-vpngw \
  --local-config-file ./nebius-vpngw-config.yaml \
  --dry-run

# Apply with peer configs (explicit subcommand also works)
nebius-vpngw \
  --local-config-file ./nebius-vpngw-config.yaml \
  --peer-config-file ./doc/gcp-ha-vpn-config.txt \
  --peer-config-file ./doc/aws-vpn-config.txt \
  --sa nb-vpngw-sa \
  --project-id my-project \
  --zone eu-north1-a

Tip: Supplying multiple `--peer-config-file` values lets the orchestrator merge details from several peers (e.g., one GCP and one AWS) into the YAML-defined connections. Vendor is auto-detected when possible, but files are treated generically — they only populate missing fields (PSKs, APIPA IPs, crypto, remote ASN) and never change your topology.

Service Account option (`--sa`):
- If you pass `--sa <name>`, the CLI will attempt to ensure a Service Account of that name exists (with Editor permissions) and obtain a token via the Nebius SDK. If it cannot, it falls back to using the Nebius CLI default profile.
- If you omit `--sa`, the Nebius SDK initialization relies on your local Nebius CLI config (default profile). See https://docs.nebius.com/cli/quickstart.

Public IPs (dynamic vs static allocations):
- Default: Two static public IP allocations are attached — one per NIC (eth0, eth1). If `external_ips` is omitted/empty, the orchestrator creates and attaches them under `vpngw-subnet`.
- Specific allocations: Provide two allocation IDs via `gateway_group.external_ips` to attach existing allocations. The orchestrator validates their region/network alignment.
- Region alignment: Allocations and `vpngw-subnet` must be in the VM’s region.

Agent service on VM:
- Install the agent binary and systemd unit (packaged at `nebius_vpngw/systemd/nebius-vpngw-agent.service`), then enable/start:
 
  ```zsh
  sudo cp /path/to/nebius-vpngw-agent /usr/bin/
  sudo cp $(python -c 'import importlib.resources as r; print(r.files("nebius_vpngw").joinpath("systemd/nebius-vpngw-agent.service"))') /etc/systemd/system/
  sudo systemctl daemon-reload
  sudo systemctl enable --now nebius-vpngw-agent
  ```

## Build Executable

Build a standalone binary using Poetry (recommended):

```zsh
poetry install
poetry run build-binary
# Binary created under `dist/nebius-vpngw`
```

Advanced (optional): raw PyInstaller invocation if you need custom flags:

```zsh
poetry run pyinstaller -F -n nebius-vpngw src/nebius_vpngw/__main__.py
```

## Distribution Options

This project supports two distribution modes to fit different audiences:

- Python package (recommended for dev/ops teams)
- Single-file binary via PyInstaller (for non-Python users)

### Python Package (Dev/Ops, reproducible installs)

- Why: Deterministic environments using `poetry.lock`; easy install and updates.
- Entry points: Defined in `tool.poetry.scripts`.

Commands (macOS / zsh):

```zsh
# Create/refresh lock for reproducible builds
poetry lock

# Install in a virtualenv managed by Poetry
poetry install

# Run the CLIs from the virtualenv
poetry run nebius-vpngw --help
poetry run nebius-vpngw-agent --help

# Optional: install system-wide via pipx (isolated environment)
pipx install .
nebius-vpngw --help
```

Notes:

- Commit `poetry.lock` to version control.
- For library-like usage you may choose not to commit the lock, but for apps/services it’s best practice to commit it.

### Single-File Binary (Non-Python users)

- Why: One executable, no Python required on target hosts.
- Tool: PyInstaller.
- Requirements: Test on a clean macOS, codesign/notarize if distributing externally, bundle any required assets.

Build commands:

```zsh
# Ensure dependencies are installed in the Poetry venv
poetry install

# Build single-file binary
poetry run build-binary  # uses [tool.poetry.scripts] build-binary entry

# Result: dist/nebius-vpngw
ls -la dist

# Or raw PyInstaller (equivalent)
poetry run pyinstaller -F -n nebius-vpngw src/nebius_vpngw/__main__.py

# If your CLI loads modules/plugins dynamically, you may need:
#   --hidden-import some_module
# If your app needs assets (e.g., diagram templates), bundle them:
#   --add-data "image/*:image"
```

macOS distribution checklist:

- Codesign the binary with a valid Apple Developer ID.
- Notarize the signed binary with Apple (required for Gatekeeper).
- Verify on a clean macOS VM before sharing.

Example codesign/notarize (placeholder):

```zsh
# Sign (replace with your identity)
codesign --force --options runtime --sign "Developer ID Application: Your Org (TEAMID)" dist/nebius-vpngw

# Verify signature
codesign --verify --deep --strict dist/nebius-vpngw
spctl --assess --verbose=4 dist/nebius-vpngw

# Notarize (requires xcrun altool/notarytool setup)
# xcrun notarytool submit dist/nebius-vpngw --keychain-profile "notary-profile" --wait
```

Troubleshooting:

- If the binary fails to locate resources, add `--add-data` for required files and access them via `importlib.resources` or relative paths.
- If Rich/Typer styles don’t render correctly in minimal terminals, try setting `TERM=xterm-256color`.
- If you need custom PyInstaller arguments, run the underlying command directly (see `nebius_vpngw/build.py`).
Or use Poetry to create wheel/sdist:

```zsh
poetry build
# dist/nebius-vpngw-0.1.0-py3-none-any.whl
```

## Agent Service

On the gateway VM, install and run the agent (scaffold):

- Console script: `nebius-vpngw-agent`
- Reads `/etc/nebius-vpngw/config-resolved.yaml`
- Writes strongSwan (`/etc/ipsec.conf`, `/etc/ipsec.secrets`) and FRR (`/etc/frr/bgpd.conf`) configs
- Idempotent via `/etc/nebius-vpngw/last-applied.json`

Example systemd unit (to add later):

```ini
[Unit]
Description=Nebius VPNGW Agent
After=network.target

[Service]
ExecStart=/usr/bin/nebius-vpngw-agent
ExecReload=/bin/kill -HUP $MAINPID
Restart=always

[Install]
WantedBy=multi-user.target
```

### Rebuilding Agent After Code Changes

**IMPORTANT:** When you modify the agent code (or any Python source), you must rebuild the wheel before deploying to VMs.

The deployment workflow is:

1. **Build wheel** → Creates `dist/nebius_vpngw-0.0.0-py3-none-any.whl`
2. **Deploy** → `nebius-vpngw` reads the wheel from `dist/`, uploads it to VMs via SSH, and installs it

**Quick rebuild commands:**

```bash
# Clean old build artifacts
rm -rf src/dist/ src/build/ src/nebius_vpngw.egg-info/

# Rebuild wheel (choose one method):
poetry build                    # Recommended with Poetry
python -m build --wheel         # Alternative with build module
pip wheel --no-deps -w dist .   # Alternative with pip

# Deploy updated code to VMs
export GCP_TUNNEL_PSK="your-secret"
nebius-vpngw --local-config-file ./nebius-vpngw-config.yaml
```

**Note:** The wheel is NOT installed into your local virtualenv—it's only uploaded to remote VMs. Your local CLI (`nebius-vpngw`) runs from your virtualenv and remains unaffected by the wheel build.

## Monitoring and Troubleshooting

### Checking Tunnel Status

Use the `status` command to view active tunnels and system health:

```bash
nebius-vpngw status --local-config-file ./nebius-vpngw-config.yaml
```

This displays:
- **Tunnel status table:** Shows each tunnel's name, gateway VM, connection state (ESTABLISHED/CONNECTING), peer IP, encryption algorithm, and uptime
- **System service health:** Shows status of `nebius-vpngw-agent`, `strongswan-starter`, and `frr` services on each gateway VM

Example output:
```
                           VPN Gateway Status
┏━━━━━━━━━━━━━━━━━━━━━━┳━━━━━━━━━━━━━┳━━━━━━━━━━━━━━┳━━━━━━━━━━━━━━━━━┳━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┳━━━━━━━━━━━┓
┃ Tunnel               ┃ Gateway VM  ┃ Status       ┃ Peer IP         ┃ Encryption                   ┃ Uptime    ┃
┡━━━━━━━━━━━━━━━━━━━━━━╇━━━━━━━━━━━━━╇━━━━━━━━━━━━━━╇━━━━━━━━━━━━━━━━━╇━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━╇━━━━━━━━━━━┩
│ gcp-classic-tunnel-0 │ vpngw-vm-0  │ ESTABLISHED  │ 34.155.169.244  │ AES_GCM_16_128/...           │ 5 minutes │
└──────────────────────┴─────────────┴──────────────┴─────────────────┴──────────────────────────────┴───────────┘
```

### Configuration File Locations on Gateway VMs

Critical files on each gateway VM:

**IPsec Configuration:**
- `/etc/ipsec.conf` - StrongSwan IPsec tunnel configuration (rendered by agent)
- `/etc/ipsec.secrets` - Pre-shared keys and authentication secrets
- `/etc/strongswan.conf` - StrongSwan daemon configuration

**BGP Configuration (when using BGP routing mode):**
- `/etc/frr/frr.conf` - FRR BGP configuration (rendered by agent)
- `/etc/frr/daemons` - FRR daemon enable/disable settings

**Agent Configuration:**
- `/etc/nebius-vpngw-agent.yaml` - Instance-specific configuration pushed by orchestrator
- `/var/log/nebius-vpngw-agent.log` - Agent logs (if configured)

**Systemd Services:**
- `nebius-vpngw-agent.service` - Agent that renders configs and reloads services
- `strongswan-starter.service` - StrongSwan IPsec daemon
- `frr.service` - FRR routing daemon

### Common Issues and Solutions

#### Tunnel Not Establishing

**Symptom:** Tunnel status shows `CONNECTING` or no connection

**Diagnostic steps:**

1. **Check IPsec status on gateway VM:**
   ```bash
   ssh ubuntu@<gateway-ip> 'sudo ipsec statusall'
   ```
   
   Look for error messages like:
   - `no IKE config found` - Configuration mismatch or wrong local IP
   - `INVALID_SYNTAX` - Crypto proposal mismatch with peer
   - `AUTHENTICATION_FAILED` - Wrong pre-shared key (PSK)

2. **Verify XFRM policies installed:**
   ```bash
   ssh ubuntu@<gateway-ip> 'sudo ip xfrm policy'
   ```
   
   Should show policies for your configured subnets (e.g., `10.49.0.0/16 <-> 10.10.0.0/24`)

3. **Check logs for detailed errors:**
   ```bash
   ssh ubuntu@<gateway-ip> 'sudo journalctl -u strongswan-starter -n 100'
   ```

**Common fixes:**

- **Wrong local IP in configuration:**
  - For **responder mode** (peer initiates connection): Use `left=%any` in strongSwan config
  - For **initiator mode** (you initiate): Use `left=<external-ip>`
  - The agent automatically sets this based on your configuration

- **Crypto proposal mismatch:**
  - Check peer's supported algorithms (e.g., GCP Classic VPN uses AES-GCM, not AES-CBC)
  - Update `ike_proposal` and `esp_proposal` in your YAML to match peer capabilities
  - Example for GCP Classic VPN: `aes256-sha256-modp2048` (IKE), `aes256-sha256` (ESP)

- **PSK authentication failure:**
  - Verify the PSK is identical on both sides (case-sensitive)
  - Check that environment variable substitution worked: `echo $GCP_TUNNEL_PSK`
  - Confirm PSK was properly uploaded to `/etc/ipsec.secrets`

- **Firewall blocking IPsec:**
  - Ensure UDP ports 500 (IKE) and 4500 (NAT-T) are allowed from peer IP
  - Ensure ESP protocol (IP protocol 50) is allowed if not using NAT-T

#### Configuration Not Updating

**Symptom:** Changes to YAML not reflected on gateway VM

**Diagnostic steps:**

1. **Verify agent received the new config:**
   ```bash
   ssh ubuntu@<gateway-ip> 'cat /etc/nebius-vpngw-agent.yaml'
   ```

2. **Check agent reloaded successfully:**
   ```bash
   ssh ubuntu@<gateway-ip> 'sudo journalctl -u nebius-vpngw-agent -n 50'
   ```
   
   Look for reload signals and rendering success messages

**Common fixes:**

- **Agent code changes require wheel rebuild:**
  - See "Rebuilding Agent After Code Changes" section above
  - Must run `poetry build` before deploying

- **Agent not running:**
  ```bash
  ssh ubuntu@<gateway-ip> 'sudo systemctl status nebius-vpngw-agent'
  ssh ubuntu@<gateway-ip> 'sudo systemctl restart nebius-vpngw-agent'
  ```

- **SSH connection issues:**
  - Verify SSH key is correctly configured in `vm_spec.ssh_public_key` or `ssh_public_key_path`
  - Check gateway VM's security group allows SSH (port 22) from your IP

#### VM Recreation Warnings

**Symptom:** CLI warns about "destructive changes" and requires `--recreate-gw`

**Understanding the warning:**
- Certain configuration changes require VM recreation (e.g., changing boot disk type, CPU/memory)
- This causes downtime for all VPN tunnels on that VM
- Public IP allocations are preserved and reassigned to the new VM

**To proceed with recreation:**
```bash
nebius-vpngw apply --recreate-gw --local-config-file ./nebius-vpngw-config.yaml
```

**Safe changes (no recreation needed):**
- Tunnel configuration updates (PSK, crypto proposals, routing)
- Network routes
- SSH keys

**Destructive changes (recreation required):**
- Boot disk type change (e.g., `NETWORK_SSD` → `NETWORK_HDD`)
- CPU or memory changes
- VM image/version changes

#### Enabling Debug Logging

For detailed IPsec troubleshooting, enable StrongSwan debug logging:

1. **SSH to gateway VM:**
   ```bash
   ssh ubuntu@<gateway-ip>
   ```

2. **Edit strongSwan config:**
   ```bash
   sudo nano /etc/strongswan.conf
   ```
   
   Add this section:
   ```ini
   charon {
       filelog {
           stderr {
               default = 1
               ike = 2
               cfg = 2
               knl = 2
           }
       }
   }
   ```

3. **Restart StrongSwan:**
   ```bash
   sudo systemctl restart strongswan-starter
   ```

4. **View debug logs:**
   ```bash
   sudo journalctl -u strongswan-starter -f
   ```

**Note:** Debug logging is verbose and can impact performance. Disable after troubleshooting.

#### BGP Session Not Establishing (BGP Mode Only)

**Symptom:** BGP neighbors not coming up when using `routing_mode: bgp`

**Diagnostic steps:**

1. **Check FRR BGP status:**
   ```bash
   ssh ubuntu@<gateway-ip> 'sudo vtysh -c "show bgp summary"'
   ```

2. **Verify BGP configuration:**
   ```bash
   ssh ubuntu@<gateway-ip> 'cat /etc/frr/frr.conf'
   ```

3. **Check FRR logs:**
   ```bash
   ssh ubuntu@<gateway-ip> 'sudo journalctl -u frr -n 100'
   ```

**Common fixes:**

- **BGP not enabled in FRR:**
  - Check `/etc/frr/daemons` has `bgpd=yes`
  - Restart FRR: `sudo systemctl restart frr`

- **Tunnel IPs not configured:**
  - For BGP mode, you need `inner_cidr`, `inner_local_ip`, `inner_remote_ip` in YAML
  - These create the VTI (Virtual Tunnel Interface) for BGP

- **ASN mismatch:**
  - Verify `local_asn` and `remote_asn` match peer's configuration

### Manual Verification Commands

Quick reference for manual checks on gateway VMs:

```bash
# IPsec tunnel status (brief)
sudo ipsec status

# IPsec tunnel status (detailed)
sudo ipsec statusall

# Reload IPsec configuration without restart
sudo ipsec reload

# Restart IPsec daemon
sudo systemctl restart strongswan-starter

# View XFRM policies (policy-based IPsec)
sudo ip xfrm policy

# View XFRM states (security associations)
sudo ip xfrm state

# BGP status (if using BGP routing mode)
sudo vtysh -c "show bgp summary"

# BGP routes (if using BGP routing mode)
sudo vtysh -c "show ip route bgp"

# Check agent status
sudo systemctl status nebius-vpngw-agent

# View agent logs
sudo journalctl -u nebius-vpngw-agent -n 100

# Reload agent configuration
sudo systemctl reload nebius-vpngw-agent

# Test connectivity to peer (if tunnel is up)
ping <peer-subnet-ip>
```

## Development

Install development dependencies (ruff, pyinstaller) using Poetry's group:

```zsh
# Include the dev group
poetry install --with dev

# Or if already installed without dev, add it:
poetry install --with dev --sync
```

Lint and format with Ruff:

```zsh
# Static analysis (errors + style)
poetry run ruff check .

# Auto-fix (safe fixes only) then re-check
poetry run ruff check . --fix

# Format (Black-compatible mode)
poetry run ruff format .
```

Suggested pre-commit configuration (optional):

```yaml
# .pre-commit-config.yaml
repos:
  - repo: https://github.com/astral-sh/ruff-pre-commit
    rev: v0.6.9
    hooks:
      - id: ruff
        args: ["--fix"]
      - id: ruff-format
  - repo: https://github.com/pytest-dev/pytest
    rev: 8.3.3
    hooks:
      - id: pytest
        additional_dependencies: []
```

Then:

```zsh
pip install pre-commit
pre-commit install
```

Environment-variable placeholders in the YAML (`${VAR}`) must be set before running tests that load configs. For local iteration you can export dummy values:

```zsh
export GCP_TUNNEL_1_PSK=dummy AWS_TUNNEL_1_PSK=dummy TENANT_ID=tenant PROJECT_ID=project REGION_ID=eu-north1
```

## Notes

- Vendor peer parsers are placeholders; integrate real parsing as needed.
- VM/route managers are stubs; wire to Nebius SDK when available.
- The scaffold emphasizes modularity and idempotency per the design.

## License

See `LICENSE` for details.
